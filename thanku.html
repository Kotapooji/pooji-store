<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thank you — Pooji Book Store</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="header container">
    <div class="brand">
      <img src="images/logo.png" alt="logo" />
      <div>
        <h1>Pooji Book Store</h1>
        <div class="small">Thank you!</div>
      </div>
    </div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
    </nav>
  </header>

  <main class="container center" style="padding:40px 20px;">
    <div class="form-card" style="max-width:720px; margin:0 auto;">
      <h2>Thank you for your order!</h2>
      <p class="small" style="margin-top:8px;">We received your order and will start preparing it shortly.</p>

      <div id="orderSummary" style="margin-top:18px;"></div>

      <div style="margin-top:18px;">
        <a href="index.html" class="btn btn-outline">Back to home</a>
      </div>

      <div style="margin-top:12px; color:var(--muted)">You will be redirected to the homepage in <span id="count">8</span> seconds...</div>
    </div>
  </main>

  <script>
    const orderStr = localStorage.getItem('pooji_last_order');
    const el = document.getElementById('orderSummary');
    if(orderStr){
      const order = JSON.parse(orderStr);
      el.innerHTML = `
        <div style="text-align:left;">
          <strong>Order ID:</strong> ${order.id}<br/>
          <strong>Name:</strong> ${order.customer.name}<br/>
          <strong>Email:</strong> ${order.customer.email}<br/>
          <strong>Address:</strong> ${order.customer.address}<br/>
          <hr style="margin:8px 0;">
          <div><strong>Items:</strong></div>
          ${order.items.map(i => `<div style="display:flex; justify-content:space-between; margin:6px 0;"><div>${i.title} <span class="small">x${i.qty||1}</span></div><div>₹ ${i.price * (i.qty||1)}</div></div>`).join('')}
          <hr>
          <div style="display:flex; justify-content:space-between; font-weight:900;"><div>Total</div><div>${order.total}</div></div>
        </div>
      `;
    } else {
      el.innerHTML = `<div style="color:var(--muted)">No order data found. If you just paid, your browser may have cleared local data.</div>`;
    }

    // redirect timer
    let t = 8;
    const countEl = document.getElementById('count');
    const timer = setInterval(()=>{
      t--; countEl.innerText = t;
      if(t <= 0){
        clearInterval(timer);
        location.href = 'index.html';
      }
    }, 1000);
  </script>
</body>
</html>
